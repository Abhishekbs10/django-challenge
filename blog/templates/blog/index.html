{% extends 'base.html' %}

{% block title %} Django Blog {% endblock %}

{% block content %}

{% for post in posts %}
    {% if post.status != 'DRAFT' %}
        <div class="post">
            <p><a href="{% url 'blog:details_post' slug=post.slug %}"><h2>{{ post.title }}</h2></a></p>
            <div class="row justify-content-between px-3">
                <div>
                Posted on &nbsp;<b>{{ post.published_date|date:"F j, Y" }}</b>&nbsp; by &nbsp;<b><a href="{% url 'blog:author' author=post.author.first_name %}">{{ post.author.first_name }}</a></b>
                </div>

                <div>
                    <b>Categories:</b> &nbsp;
                    {% for category in post.category.all %}
                        {% if not forloop.first %}/ {% endif %}
                        <a href="{% url 'blog:category' name=category.name %}">{{ category.name }}</a>
                    {% endfor %}
                </div>
            </div>
            <hr>
            <div class="row justify-content-between px-3">
                <div>
                    {{ post.content|truncatewords:10 }}<a href="{% url 'blog:details_post' slug=post.slug %}">Read more</a>
                </div>
                <div>
                    <a href="{% url 'blog:details_post' slug=post.slug %}">Comments (<span class="fb-comments-count" data-href="{% url 'blog:details_post' slug=post.slug %}"></span>)</a>
                </div>
            </div>
        </div>
        <hr>
    {% endif %}
{% empty %}
    <p>No posts.</p>
{% endfor %}
<!-- PAGINATION -->
    {% include 'blog/pagination.html' %}
{% endblock %}
